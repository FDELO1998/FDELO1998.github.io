---
title: http2.0
date: 2020-04-16
tags: HTTP
---

最近面试挺多公司会问问http1.0和2.0的区别。所以我想总结一下http2.0。目前主流的http1在1999年发布后就没有什么大的改动。随着互联网的发展，http1.0在很多时候也是力不从心。所以负责互联网技术的互联网工程任务组在14年推进http2.0标准化。
http2.0主要体现在以下几种技术：
1.压缩：使用了HPACK（HTTP2头部压缩算法）压缩格式对传输的header进行编码，减少了header的大小。并在两端维护了索引表，用于记录出现过的header，后面在传输过程中就可以传输已经记录过的header的键名，对端收到数据后就可以通过键名找到对应的值。
2.多路复用：1的时候常用雪碧图，多个域名等方式优化，因为浏览器限制了同一个域名下的请求数量，当页面需要请求很多资源的时候，队头阻塞（Head of line blocking）会导致在达到最大请求时，资源需要等待其他资源请求完成后才能继续发送。
HTTP2.0中，有两个概念非常重要：帧（frame）和流（stream）。
帧是最小的数据单位，每个帧会标识出该帧属于哪个流，流是多个帧组成的数据流。
所谓多路复用，即在一个TCP连接中存在多个流，即可以同时发送多个请求，对端可以通过帧中的表示知道该帧属于哪个请求。在客户端，这些帧乱序发送，到对端后再根据每个帧首部的流标识符重新组装。通过该技术，可以避免HTTP旧版本的队头阻塞问题，极大提高传输性能。

3.协商
4.客户端/服务端推送：在HTTP2.0中，服务端可以在客户端某个请求后，主动推送其他资源。
5.流量控制
6.WebSocket
7.TLS义务化
8.二进制传输：1的时候使用文本传输，2采用将传输数据分割，编码为二进制传输，大大加快了速度。